<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>moveBankProjet: moveBankAuth Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">moveBankProjet
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmoveBankAuth-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">moveBankAuth Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class is used to authentificate to the moveBank database.  
 <a href="classmoveBankAuth.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="authentification_8h_source.html">authentification.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aed11f77749667280c1ac79dcfbee1f4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankAuth.html#aed11f77749667280c1ac79dcfbee1f4f">moveBankAuth</a> (const string &amp;homeDir, const string &amp;adresse)</td></tr>
<tr class="memdesc:aed11f77749667280c1ac79dcfbee1f4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="classmoveBankAuth.html" title="This class is used to authentificate to the moveBank database.">moveBankAuth</a>.  <a href="classmoveBankAuth.html#aed11f77749667280c1ac79dcfbee1f4f">More...</a><br /></td></tr>
<tr class="separator:aed11f77749667280c1ac79dcfbee1f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f638a565bae4ef52cb6a0d0c7f2d277"><td class="memItemLeft" align="right" valign="top"><a id="a1f638a565bae4ef52cb6a0d0c7f2d277"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankAuth.html#a1f638a565bae4ef52cb6a0d0c7f2d277">cleanUp</a> ()</td></tr>
<tr class="memdesc:a1f638a565bae4ef52cb6a0d0c7f2d277"><td class="mdescLeft">&#160;</td><td class="mdescRight">cleaner for <a class="el" href="classmoveBankAuth.html" title="This class is used to authentificate to the moveBank database.">moveBankAuth</a> as the destructor bring core dump error with curl cleanup <br /></td></tr>
<tr class="separator:a1f638a565bae4ef52cb6a0d0c7f2d277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c494bd9bd48c749b88a2ac72583d64"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankAuth.html#a86c494bd9bd48c749b88a2ac72583d64">calculateMD5</a> (string &amp;fileName)</td></tr>
<tr class="memdesc:a86c494bd9bd48c749b88a2ac72583d64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculating the md5 using the license_terms.txt file.  <a href="classmoveBankAuth.html#a86c494bd9bd48c749b88a2ac72583d64">More...</a><br /></td></tr>
<tr class="separator:a86c494bd9bd48c749b88a2ac72583d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb10b181a7e162ad31daa2dd734de5e"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankAuth.html#a2eb10b181a7e162ad31daa2dd734de5e">getMD5</a> ()</td></tr>
<tr class="memdesc:a2eb10b181a7e162ad31daa2dd734de5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the md5 key.  <a href="classmoveBankAuth.html#a2eb10b181a7e162ad31daa2dd734de5e">More...</a><br /></td></tr>
<tr class="separator:a2eb10b181a7e162ad31daa2dd734de5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is used to authentificate to the moveBank database. </p>
<p>This class is used to create an anthentification between moveBank.org and your moveBank identifier (here my are used by default) so that you can retrieve the data. You could need to change it to your identifier. Just create an account on moveBank and change it here. (id and password) Methods are used to create the certificate, the md5 encoded bound and store these data. This constructor use curl library to communicate with moveBank database</p>
<p>This class is used to create an anthentification between moveBank.org and your moveBank identifier (here my are used by default) so that you can retrieve the data. You could need to change it to your identifier. Just create an account on moveBank and change it here. (id and password) Methods are used to create the certificate, the md5 hash and store these data. </p>

<p class="definition">Definition at line <a class="el" href="authentification_8h_source.html#l00028">28</a> of file <a class="el" href="authentification_8h_source.html">authentification.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aed11f77749667280c1ac79dcfbee1f4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed11f77749667280c1ac79dcfbee1f4f">&#9670;&nbsp;</a></span>moveBankAuth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moveBankAuth::moveBankAuth </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>homeDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>adresse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for <a class="el" href="classmoveBankAuth.html" title="This class is used to authentificate to the moveBank database.">moveBankAuth</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adresse</td><td>This is the https moveBank study adress with which the certificate is made. Each study need a specific certificate </td></tr>
    <tr><td class="paramname">outputFilePath</td><td>This is the path to where the data from the request are stored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="authentification_8cpp_source.html#l00017">17</a> of file <a class="el" href="authentification_8cpp_source.html">authentification.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                                                                     {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    curl = curl_easy_init();</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="keywordtype">string</span> filename = string(homeDir) + <span class="stringliteral">&quot;/moveBankProjet/license_terms.txt&quot;</span>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="keywordflow">if</span> (!filesystem::exists(filename)){</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        curl_easy_setopt(curl, CURLOPT_URL, adresse.c_str());</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        curl_easy_setopt(curl, CURLOPT_USERPWD, <span class="stringliteral">&quot;valpaz:valpaz21&quot;</span>);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        curl_easy_setopt(curl, CURLOPT_WRITEDATA, fopen((<span class="keywordtype">string</span>(homeDir) + <span class="stringliteral">&quot;/moveBankProjet/license_terms.txt&quot;</span>).c_str(), <span class="stringliteral">&quot;wb&quot;</span>));</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        CURLcode resInit = curl_easy_perform(curl);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <span class="keywordflow">if</span> (resInit != CURLE_OK) {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;            cerr &lt;&lt; <span class="stringliteral">&quot;Request error :&quot;</span> &lt;&lt; curl_easy_strerror(resInit) &lt;&lt; endl;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        }<span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            cout &lt;&lt; <span class="stringliteral">&quot;Successful request : authentification files set up &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            md5 = <a class="code" href="classmoveBankAuth.html#a86c494bd9bd48c749b88a2ac72583d64">calculateMD5</a>(filename);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        }</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        md5 = <a class="code" href="classmoveBankAuth.html#a86c494bd9bd48c749b88a2ac72583d64">calculateMD5</a>(filename);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    }</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    curl_easy_cleanup(curl);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div>
<div class="ttc" id="aclassmoveBankAuth_html_a86c494bd9bd48c749b88a2ac72583d64"><div class="ttname"><a href="classmoveBankAuth.html#a86c494bd9bd48c749b88a2ac72583d64">moveBankAuth::calculateMD5</a></div><div class="ttdeci">string calculateMD5(string &amp;fileName)</div><div class="ttdoc">Calculating the md5 using the license_terms.txt file.</div><div class="ttdef"><b>Definition:</b> <a href="authentification_8cpp_source.html#l00060">authentification.cpp:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a86c494bd9bd48c749b88a2ac72583d64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86c494bd9bd48c749b88a2ac72583d64">&#9670;&nbsp;</a></span>calculateMD5()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string moveBankAuth::calculateMD5 </td>
          <td>(</td>
          <td class="paramtype">string &amp;&#160;</td>
          <td class="paramname"><em>fileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculating the md5 using the license_terms.txt file. </p>
<p>Constructor for <a class="el" href="classmoveBankRequests.html" title="This class is used to make requests to moveBank database (moveBank.org)">moveBankRequests</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>The path to the license_terms.txt file</td></tr>
  </table>
  </dd>
</dl>
<p>This method takes a file as input, calculates its MD5 hash and returns the result as a hexadecimal string</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adresse</td><td>This is the https adress to where the request is made </td></tr>
    <tr><td class="paramname">outputFilePath</td><td>This is the path to where the data from the request are stored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="authentification_8cpp_source.html#l00060">60</a> of file <a class="el" href="authentification_8cpp_source.html">authentification.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                                 {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    CryptoPP::Weak::MD5 md5;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">string</span> result;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    ifstream file(fileName);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    CryptoPP::FileSource(file, <span class="keyword">true</span>, <span class="keyword">new</span> CryptoPP::HashFilter(md5, <span class="keyword">new</span> CryptoPP::StringSink(result)));</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">string</span> md5Hex;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    CryptoPP::StringSource(result, <span class="keyword">true</span>, <span class="keyword">new</span> CryptoPP::HexEncoder(<span class="keyword">new</span> CryptoPP::StringSink(md5Hex), <span class="keyword">false</span>));</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> md5Hex;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2eb10b181a7e162ad31daa2dd734de5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb10b181a7e162ad31daa2dd734de5e">&#9670;&nbsp;</a></span>getMD5()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string moveBankAuth::getMD5 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the md5 key. </p>
<p>Return the md5 generated hash </p>

<p class="definition">Definition at line <a class="el" href="authentification_8cpp_source.html#l00076">76</a> of file <a class="el" href="authentification_8cpp_source.html">authentification.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                            {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> md5;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="authentification_8h_source.html">authentification.h</a></li>
<li><a class="el" href="authentification_8cpp_source.html">authentification.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
