<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CrowMove: moveBankRequests Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CrowMove
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmoveBankRequests-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">moveBankRequests Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class is used to make requests to moveBank database (moveBank.org)  
 <a href="classmoveBankRequests.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="request_8h_source.html">request.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a76db415a23f819c6a1bd15e4f171eee2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankRequests.html#a76db415a23f819c6a1bd15e4f171eee2">moveBankRequests</a> (const string &amp;adresse, const string &amp;outputFilePath)</td></tr>
<tr class="memdesc:a76db415a23f819c6a1bd15e4f171eee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="classmoveBankRequests.html" title="This class is used to make requests to moveBank database (moveBank.org)">moveBankRequests</a>.  <a href="classmoveBankRequests.html#a76db415a23f819c6a1bd15e4f171eee2">More...</a><br /></td></tr>
<tr class="separator:a76db415a23f819c6a1bd15e4f171eee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6578c33ac31ac449694ba8006e9d0748"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankRequests.html#a6578c33ac31ac449694ba8006e9d0748">cleanUp</a> ()</td></tr>
<tr class="memdesc:a6578c33ac31ac449694ba8006e9d0748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for <a class="el" href="classmoveBankRequests.html" title="This class is used to make requests to moveBank database (moveBank.org)">moveBankRequests</a>.  <a href="classmoveBankRequests.html#a6578c33ac31ac449694ba8006e9d0748">More...</a><br /></td></tr>
<tr class="separator:a6578c33ac31ac449694ba8006e9d0748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a107b8bbaf772c6220d365752a4d059af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankRequests.html#a107b8bbaf772c6220d365752a4d059af">idParsing</a> (const string &amp;homeDir, const string &amp;outputInd)</td></tr>
<tr class="memdesc:a107b8bbaf772c6220d365752a4d059af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parsing for moveBank individual data.  <a href="classmoveBankRequests.html#a107b8bbaf772c6220d365752a4d059af">More...</a><br /></td></tr>
<tr class="separator:a107b8bbaf772c6220d365752a4d059af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979a9f267e89db92c7084cbc4d971948"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankRequests.html#a979a9f267e89db92c7084cbc4d971948">eventInitialParsing</a> (const string &amp;homeDir, const string &amp;outputEvent)</td></tr>
<tr class="memdesc:a979a9f267e89db92c7084cbc4d971948"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parsing for moveBank initial event data.  <a href="classmoveBankRequests.html#a979a9f267e89db92c7084cbc4d971948">More...</a><br /></td></tr>
<tr class="separator:a979a9f267e89db92c7084cbc4d971948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac836852a4052c25d6004053dd26883"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoveBankRequests.html#a3ac836852a4052c25d6004053dd26883">eventUpdateparsing</a> (const string &amp;homeDir, const string &amp;outputUpdateEvent)</td></tr>
<tr class="memdesc:a3ac836852a4052c25d6004053dd26883"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parsing for moveBank update event data.  <a href="classmoveBankRequests.html#a3ac836852a4052c25d6004053dd26883">More...</a><br /></td></tr>
<tr class="separator:a3ac836852a4052c25d6004053dd26883"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is used to make requests to moveBank database (moveBank.org) </p>
<p>This class is used to request different types of data to moveBank database. It use the library curl and is implemented with my identifier. (identifier is needed to access moveBank) You could need to change it to your identifier. Just create an account on moveBank and change it here. Methods are used to parse raw data and store them in data and indfiles folders </p>

<p class="definition">Definition at line <a class="el" href="request_8h_source.html#l00024">24</a> of file <a class="el" href="request_8h_source.html">request.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a76db415a23f819c6a1bd15e4f171eee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76db415a23f819c6a1bd15e4f171eee2">&#9670;&nbsp;</a></span>moveBankRequests()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moveBankRequests::moveBankRequests </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>adresse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>outputFilePath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for <a class="el" href="classmoveBankRequests.html" title="This class is used to make requests to moveBank database (moveBank.org)">moveBankRequests</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adresse</td><td>This is the https adress to where the request is made </td></tr>
    <tr><td class="paramname">outputFilePath</td><td>This is the path to where the data from the request are stored</td></tr>
  </table>
  </dd>
</dl>
<p>Make the call to the database, retrieve the data and store them</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adresse</td><td>This is the https adress to where the request is made </td></tr>
    <tr><td class="paramname">outputFilePath</td><td>This is the path to where the data from the request are stored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="request_8cpp_source.html#l00015">15</a> of file <a class="el" href="request_8cpp_source.html">request.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    curl = curl_easy_init();</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    CURLcode res;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    curl_easy_setopt(curl, CURLOPT_URL, adresse.c_str());</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    curl_easy_setopt(curl, CURLOPT_USERPWD, <span class="stringliteral">&quot;valpaz:valpaz21&quot;</span>);</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    FILE* outputFile;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    outputFile = fopen(outputFilePath.c_str(), <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    curl_easy_setopt(curl, CURLOPT_WRITEDATA, outputFile);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    res = curl_easy_perform(curl);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">if</span> (res != CURLE_OK) {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;Request error &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    }<span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Successful request &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    }</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    fclose(outputFile);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6578c33ac31ac449694ba8006e9d0748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6578c33ac31ac449694ba8006e9d0748">&#9670;&nbsp;</a></span>cleanUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moveBankRequests::cleanUp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor for <a class="el" href="classmoveBankRequests.html" title="This class is used to make requests to moveBank database (moveBank.org)">moveBankRequests</a>. </p>
<p>cleaner for <a class="el" href="classmoveBankAuth.html" title="This class is used to authentificate to the moveBank database.">moveBankAuth</a> as the destructor bring core dump error with curl cleanup </p>

<p class="definition">Definition at line <a class="el" href="request_8cpp_source.html#l00035">35</a> of file <a class="el" href="request_8cpp_source.html">request.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                               {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">if</span> (curl) {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        curl_easy_cleanup(curl);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    }</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a979a9f267e89db92c7084cbc4d971948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a979a9f267e89db92c7084cbc4d971948">&#9670;&nbsp;</a></span>eventInitialParsing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moveBankRequests::eventInitialParsing </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>homeDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>outputEvent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parsing for moveBank initial event data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">homeDir</td><td>The path representing your home directory </td></tr>
    <tr><td class="paramname">outputEvent</td><td>This is the path to where the raw data from the request are stored</td></tr>
  </table>
  </dd>
</dl>
<p>Parse the raw event data (containing mixed data of all individual) and create new files for each tag_id. Each of this new files are filled with their corresponding event which contain their location and time of this location. Thus are the initial data to populate the future graph. You can choose how much day of data you want to initialy retrieve by changing the number of day in <a class="el" href="myFunctions_8cpp_source.html">myFunctions.cpp</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">homeDir</td><td>The path representing your home directory </td></tr>
    <tr><td class="paramname">outputEvent</td><td>This is the path to where the raw data from the request are stored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="request_8cpp_source.html#l00091">91</a> of file <a class="el" href="request_8cpp_source.html">request.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                                                                         {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    ifstream fileInds(<span class="keywordtype">string</span>(homeDir) + <span class="stringliteral">&quot;/moveBankProjet/data/individu.txt&quot;</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">string</span> ligne;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">string</span> ligneEvent;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">string</span> currentId;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">int</span> cptt;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">while</span> (getline(fileInds, ligne)) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        currentId = ligne;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="comment">// Creating a file for each individual</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        ofstream fileInd((<span class="keywordtype">string</span>(homeDir) + <span class="stringliteral">&quot;/moveBankProjet/indFiles/&quot;</span>+currentId + <span class="stringliteral">&quot;.csv&quot;</span>).c_str());</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        ifstream fileEvent(outputEvent.c_str());</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        getline(fileEvent, ligneEvent);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">while</span> (getline(fileEvent, ligneEvent)) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            stringstream ss(ligneEvent);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordtype">string</span> valeur;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            cptt = 0;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="keywordflow">while</span> (getline(ss, valeur, <span class="charliteral">&#39;,&#39;</span>)) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="keywordflow">if</span> (cptt==4){</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    valeur.erase(valeur.find_last_not_of(<span class="stringliteral">&quot;\n\r&quot;</span>) + 1);         </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                    <span class="keywordflow">if</span> (valeur==currentId){</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                        fileInd &lt;&lt; ligneEvent &lt;&lt; endl;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                cptt++;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        fileInd.close();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        fileEvent.close();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    fileInds.close();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ac836852a4052c25d6004053dd26883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ac836852a4052c25d6004053dd26883">&#9670;&nbsp;</a></span>eventUpdateparsing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moveBankRequests::eventUpdateparsing </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>homeDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>outputUpdateEvent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parsing for moveBank update event data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">homeDir</td><td>The path representing your home directory </td></tr>
    <tr><td class="paramname">outputUpdateEvent</td><td>This is the path to where the raw data from the request are stored</td></tr>
  </table>
  </dd>
</dl>
<p>Parse the raw event data (containing mixed data of all individual) and update already existing files for each tag_id. Each of this files are filled with their new corresponding event which contain their location and time of this location.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">homeDir</td><td>The path representing your home directory </td></tr>
    <tr><td class="paramname">outputUpdateEvent</td><td>This is the path to where the raw data from the request are stored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="request_8cpp_source.html#l00134">134</a> of file <a class="el" href="request_8cpp_source.html">request.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                                                                              {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    ifstream fileIndis(<span class="keywordtype">string</span>(homeDir) + <span class="stringliteral">&quot;/moveBankProjet/data/individu.txt&quot;</span>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">string</span> line;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">string</span> ligneEvent;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">string</span> currentId;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">int</span> cptt;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">while</span> (getline(fileIndis, line)) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        currentId = line;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        ofstream fileUpdateInd((<span class="keywordtype">string</span>(homeDir) + <span class="stringliteral">&quot;/moveBankProjet/indFiles/&quot;</span>+currentId + <span class="stringliteral">&quot;.csv&quot;</span>).c_str(),std::ios::app);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        ifstream fileUpdateEvent(outputUpdateEvent.c_str());</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">while</span> (getline(fileUpdateEvent, ligneEvent)) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            stringstream ss(ligneEvent);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordtype">string</span> valeur;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            cptt = 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keywordflow">while</span> (getline(ss, valeur, <span class="charliteral">&#39;,&#39;</span>)) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">if</span> (cptt==4){</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    valeur.erase(valeur.find_last_not_of(<span class="stringliteral">&quot;\n\r&quot;</span>) + 1);   </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    <span class="keywordflow">if</span> (valeur==currentId){</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                        fileUpdateInd &lt;&lt; ligneEvent &lt;&lt; endl;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                cptt++;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        fileUpdateInd.close();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        fileUpdateEvent.close();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a107b8bbaf772c6220d365752a4d059af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a107b8bbaf772c6220d365752a4d059af">&#9670;&nbsp;</a></span>idParsing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moveBankRequests::idParsing </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>homeDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>outputInd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parsing for moveBank individual data. </p>
<p>Destructor for <a class="el" href="classmoveBankRequests.html" title="This class is used to make requests to moveBank database (moveBank.org)">moveBankRequests</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">homeDir</td><td>The path representing your home directory </td></tr>
    <tr><td class="paramname">outputInd</td><td>This is the path to where the raw data from the request are stored</td></tr>
  </table>
  </dd>
</dl>
<p>Parsing for moveBank individual data.</p>
<p>Parse the raw data containing ids, informations, etc and create a new file containing only the tag Id (skipping useless data)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">homeDir</td><td>The path representing your home directory </td></tr>
    <tr><td class="paramname">outputInd</td><td>This is the path to where the raw data from the request are stored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="request_8cpp_source.html#l00058">58</a> of file <a class="el" href="request_8cpp_source.html">request.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                                             {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordtype">string</span> line;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        ifstream fileOutput(outputInd.c_str());</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        ofstream fileIndiv(<span class="keywordtype">string</span>(homeDir) + <span class="stringliteral">&quot;/moveBankProjet/data/individu.txt&quot;</span>, std::ios::out | std::ios::trunc);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">while</span> (getline(fileOutput, line)) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            stringstream ss(line);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordtype">int</span> cpt = 0;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="keywordflow">while</span> (ss.good()) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                std::string substr;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                getline(ss, substr, <span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                <span class="keywordflow">if</span> (cpt == 2){</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                    <span class="keywordflow">if</span> (isdigit(substr[0])){</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                        fileIndiv &lt;&lt; substr &lt;&lt; std::endl;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                    }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                cpt++;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        fileIndiv.close();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        fileOutput.close();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="request_8h_source.html">request.h</a></li>
<li><a class="el" href="request_8cpp_source.html">request.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
