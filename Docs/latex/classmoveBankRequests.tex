\hypertarget{classmoveBankRequests}{}\doxysection{move\+Bank\+Requests Class Reference}
\label{classmoveBankRequests}\index{moveBankRequests@{moveBankRequests}}


This class is used to make requests to move\+Bank database (move\+Bank.\+org)  




{\ttfamily \#include $<$request.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmoveBankRequests_a76db415a23f819c6a1bd15e4f171eee2}{move\+Bank\+Requests}} (const string \&adresse, const string \&output\+File\+Path)
\begin{DoxyCompactList}\small\item\em Constructor for \mbox{\hyperlink{classmoveBankRequests}{move\+Bank\+Requests}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmoveBankRequests_a6578c33ac31ac449694ba8006e9d0748}{clean\+Up}} ()
\begin{DoxyCompactList}\small\item\em Destructor for \mbox{\hyperlink{classmoveBankRequests}{move\+Bank\+Requests}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmoveBankRequests_a107b8bbaf772c6220d365752a4d059af}{id\+Parsing}} (const string \&home\+Dir, const string \&output\+Ind)
\begin{DoxyCompactList}\small\item\em Parsing for move\+Bank individual data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmoveBankRequests_a979a9f267e89db92c7084cbc4d971948}{event\+Initial\+Parsing}} (const string \&home\+Dir, const string \&output\+Event)
\begin{DoxyCompactList}\small\item\em Parsing for move\+Bank initial event data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmoveBankRequests_a3ac836852a4052c25d6004053dd26883}{event\+Updateparsing}} (const string \&home\+Dir, const string \&output\+Update\+Event)
\begin{DoxyCompactList}\small\item\em Parsing for move\+Bank update event data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class is used to make requests to move\+Bank database (move\+Bank.\+org) 

This class is used to request different types of data to move\+Bank database. It use the library curl and is implemented with my identifier. (identifier is needed to access move\+Bank) You could need to change it to your identifier. Just create an account on move\+Bank and change it here. Methods are used to parse raw data and store them in data and indfiles folders 

Definition at line 24 of file request.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmoveBankRequests_a76db415a23f819c6a1bd15e4f171eee2}\label{classmoveBankRequests_a76db415a23f819c6a1bd15e4f171eee2}} 
\index{moveBankRequests@{moveBankRequests}!moveBankRequests@{moveBankRequests}}
\index{moveBankRequests@{moveBankRequests}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{moveBankRequests()}{moveBankRequests()}}
{\footnotesize\ttfamily move\+Bank\+Requests\+::move\+Bank\+Requests (\begin{DoxyParamCaption}\item[{const string \&}]{adresse,  }\item[{const string \&}]{output\+File\+Path }\end{DoxyParamCaption})}



Constructor for \mbox{\hyperlink{classmoveBankRequests}{move\+Bank\+Requests}}. 


\begin{DoxyParams}{Parameters}
{\em adresse} & This is the https adress to where the request is made \\
\hline
{\em output\+File\+Path} & This is the path to where the data from the request are stored\\
\hline
\end{DoxyParams}
Make the call to the database, retrieve the data and store them


\begin{DoxyParams}{Parameters}
{\em adresse} & This is the https adress to where the request is made \\
\hline
{\em output\+File\+Path} & This is the path to where the data from the request are stored \\
\hline
\end{DoxyParams}


Definition at line 15 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15                                                                                      \{}
\DoxyCodeLine{16     curl = curl\_easy\_init();}
\DoxyCodeLine{17     CURLcode res;}
\DoxyCodeLine{18     curl\_easy\_setopt(curl, CURLOPT\_URL, adresse.c\_str());}
\DoxyCodeLine{19     curl\_easy\_setopt(curl, CURLOPT\_USERPWD, \textcolor{stringliteral}{"{}valpaz:valpaz21"{}});}
\DoxyCodeLine{20     FILE* outputFile;}
\DoxyCodeLine{21     outputFile = fopen(outputFilePath.c\_str(), \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{22     curl\_easy\_setopt(curl, CURLOPT\_WRITEDATA, outputFile);}
\DoxyCodeLine{23     res = curl\_easy\_perform(curl);}
\DoxyCodeLine{24     \textcolor{keywordflow}{if} (res != CURLE\_OK) \{}
\DoxyCodeLine{25         cerr << \textcolor{stringliteral}{"{}Request error "{}} << endl;}
\DoxyCodeLine{26     \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{27         cout << \textcolor{stringliteral}{"{}Successful request "{}} << endl;}
\DoxyCodeLine{28     \}}
\DoxyCodeLine{29     fclose(outputFile);}
\DoxyCodeLine{30 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmoveBankRequests_a6578c33ac31ac449694ba8006e9d0748}\label{classmoveBankRequests_a6578c33ac31ac449694ba8006e9d0748}} 
\index{moveBankRequests@{moveBankRequests}!cleanUp@{cleanUp}}
\index{cleanUp@{cleanUp}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{cleanUp()}{cleanUp()}}
{\footnotesize\ttfamily void move\+Bank\+Requests\+::clean\+Up (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Destructor for \mbox{\hyperlink{classmoveBankRequests}{move\+Bank\+Requests}}. 

cleaner for \mbox{\hyperlink{classmoveBankAuth}{move\+Bank\+Auth}} as the destructor bring core dump error with curl cleanup 

Definition at line 35 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{35                                \{}
\DoxyCodeLine{36     \textcolor{keywordflow}{if} (curl) \{}
\DoxyCodeLine{37         curl\_easy\_cleanup(curl);}
\DoxyCodeLine{38     \}}
\DoxyCodeLine{39 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmoveBankRequests_a979a9f267e89db92c7084cbc4d971948}\label{classmoveBankRequests_a979a9f267e89db92c7084cbc4d971948}} 
\index{moveBankRequests@{moveBankRequests}!eventInitialParsing@{eventInitialParsing}}
\index{eventInitialParsing@{eventInitialParsing}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{eventInitialParsing()}{eventInitialParsing()}}
{\footnotesize\ttfamily void move\+Bank\+Requests\+::event\+Initial\+Parsing (\begin{DoxyParamCaption}\item[{const string \&}]{home\+Dir,  }\item[{const string \&}]{output\+Event }\end{DoxyParamCaption})}



Parsing for move\+Bank initial event data. 


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Event} & This is the path to where the raw data from the request are stored\\
\hline
\end{DoxyParams}
Parse the raw event data (containing mixed data of all individual) and create new files for each tag\+\_\+id. Each of this new files are filled with their corresponding event which contain their location and time of this location. Thus are the initial data to populate the future graph. You can choose how much day of data you want to initialy retrieve by changing the number of day in \mbox{\hyperlink{myFunctions_8cpp_source}{my\+Functions.\+cpp}}


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Event} & This is the path to where the raw data from the request are stored \\
\hline
\end{DoxyParams}


Definition at line 91 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{91                                                                                          \{}
\DoxyCodeLine{92     ifstream fileInds(\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/data/individu.txt"{}});}
\DoxyCodeLine{93     \textcolor{keywordtype}{string} ligne;}
\DoxyCodeLine{94     \textcolor{keywordtype}{string} ligneEvent;}
\DoxyCodeLine{95     \textcolor{keywordtype}{string} currentId;}
\DoxyCodeLine{96     \textcolor{keywordtype}{int} cptt;}
\DoxyCodeLine{97     \textcolor{keywordflow}{while} (getline(fileInds, ligne)) \{}
\DoxyCodeLine{98         currentId = ligne;}
\DoxyCodeLine{99 }
\DoxyCodeLine{100         \textcolor{comment}{// Creating a file for each individual}}
\DoxyCodeLine{101         ofstream fileInd((\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/indFiles/"{}}+currentId + \textcolor{stringliteral}{"{}.csv"{}}).c\_str());}
\DoxyCodeLine{102         ifstream fileEvent(outputEvent.c\_str());}
\DoxyCodeLine{103         getline(fileEvent, ligneEvent);}
\DoxyCodeLine{104         \textcolor{keywordflow}{while} (getline(fileEvent, ligneEvent)) \{}
\DoxyCodeLine{105             stringstream ss(ligneEvent);}
\DoxyCodeLine{106             \textcolor{keywordtype}{string} valeur;}
\DoxyCodeLine{107             cptt = 0;}
\DoxyCodeLine{108             \textcolor{keywordflow}{while} (getline(ss, valeur, \textcolor{charliteral}{','})) \{}
\DoxyCodeLine{109                 \textcolor{keywordflow}{if} (cptt==4)\{}
\DoxyCodeLine{110                     valeur.erase(valeur.find\_last\_not\_of(\textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)r"{}}) + 1);         }
\DoxyCodeLine{111                     \textcolor{keywordflow}{if} (valeur==currentId)\{}
\DoxyCodeLine{112                         fileInd << ligneEvent << endl;}
\DoxyCodeLine{113 }
\DoxyCodeLine{114                     \}}
\DoxyCodeLine{115                 \}}
\DoxyCodeLine{116                 cptt++;}
\DoxyCodeLine{117             \}}
\DoxyCodeLine{118         \}}
\DoxyCodeLine{119         fileInd.close();}
\DoxyCodeLine{120         fileEvent.close();}
\DoxyCodeLine{121     \}}
\DoxyCodeLine{122     fileInds.close();}
\DoxyCodeLine{123 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmoveBankRequests_a3ac836852a4052c25d6004053dd26883}\label{classmoveBankRequests_a3ac836852a4052c25d6004053dd26883}} 
\index{moveBankRequests@{moveBankRequests}!eventUpdateparsing@{eventUpdateparsing}}
\index{eventUpdateparsing@{eventUpdateparsing}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{eventUpdateparsing()}{eventUpdateparsing()}}
{\footnotesize\ttfamily void move\+Bank\+Requests\+::event\+Updateparsing (\begin{DoxyParamCaption}\item[{const string \&}]{home\+Dir,  }\item[{const string \&}]{output\+Update\+Event }\end{DoxyParamCaption})}



Parsing for move\+Bank update event data. 


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Update\+Event} & This is the path to where the raw data from the request are stored\\
\hline
\end{DoxyParams}
Parse the raw event data (containing mixed data of all individual) and update already existing files for each tag\+\_\+id. Each of this files are filled with their new corresponding event which contain their location and time of this location.


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Update\+Event} & This is the path to where the raw data from the request are stored \\
\hline
\end{DoxyParams}


Definition at line 134 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{134                                                                                               \{}
\DoxyCodeLine{135     ifstream fileIndis(\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/data/individu.txt"{}});}
\DoxyCodeLine{136     \textcolor{keywordtype}{string} line;}
\DoxyCodeLine{137     \textcolor{keywordtype}{string} ligneEvent;}
\DoxyCodeLine{138     \textcolor{keywordtype}{string} currentId;}
\DoxyCodeLine{139     \textcolor{keywordtype}{int} cptt;}
\DoxyCodeLine{140     \textcolor{keywordflow}{while} (getline(fileIndis, line)) \{}
\DoxyCodeLine{141         currentId = line;}
\DoxyCodeLine{142 }
\DoxyCodeLine{143         ofstream fileUpdateInd((\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/indFiles/"{}}+currentId + \textcolor{stringliteral}{"{}.csv"{}}).c\_str(),std::ios::app);}
\DoxyCodeLine{144         ifstream fileUpdateEvent(outputUpdateEvent.c\_str());}
\DoxyCodeLine{145         \textcolor{keywordflow}{while} (getline(fileUpdateEvent, ligneEvent)) \{}
\DoxyCodeLine{146             stringstream ss(ligneEvent);}
\DoxyCodeLine{147             \textcolor{keywordtype}{string} valeur;}
\DoxyCodeLine{148             cptt = 0;}
\DoxyCodeLine{149             \textcolor{keywordflow}{while} (getline(ss, valeur, \textcolor{charliteral}{','})) \{}
\DoxyCodeLine{150                 \textcolor{keywordflow}{if} (cptt==4)\{}
\DoxyCodeLine{151                     valeur.erase(valeur.find\_last\_not\_of(\textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)r"{}}) + 1);   }
\DoxyCodeLine{152                     \textcolor{keywordflow}{if} (valeur==currentId)\{}
\DoxyCodeLine{153                         fileUpdateInd << ligneEvent << endl;}
\DoxyCodeLine{154 }
\DoxyCodeLine{155 }
\DoxyCodeLine{156                     \}}
\DoxyCodeLine{157                 \}}
\DoxyCodeLine{158                 cptt++;}
\DoxyCodeLine{159             \}}
\DoxyCodeLine{160         \}}
\DoxyCodeLine{161         fileUpdateInd.close();}
\DoxyCodeLine{162         fileUpdateEvent.close();}
\DoxyCodeLine{163 }
\DoxyCodeLine{164     \}}
\DoxyCodeLine{165 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmoveBankRequests_a107b8bbaf772c6220d365752a4d059af}\label{classmoveBankRequests_a107b8bbaf772c6220d365752a4d059af}} 
\index{moveBankRequests@{moveBankRequests}!idParsing@{idParsing}}
\index{idParsing@{idParsing}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{idParsing()}{idParsing()}}
{\footnotesize\ttfamily void move\+Bank\+Requests\+::id\+Parsing (\begin{DoxyParamCaption}\item[{const string \&}]{home\+Dir,  }\item[{const string \&}]{output\+Ind }\end{DoxyParamCaption})}



Parsing for move\+Bank individual data. 

Destructor for \mbox{\hyperlink{classmoveBankRequests}{move\+Bank\+Requests}}.


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Ind} & This is the path to where the raw data from the request are stored\\
\hline
\end{DoxyParams}
Parsing for move\+Bank individual data.

Parse the raw data containing ids, informations, etc and create a new file containing only the tag Id (skipping useless data)


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Ind} & This is the path to where the raw data from the request are stored \\
\hline
\end{DoxyParams}


Definition at line 58 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{58                                                                              \{}
\DoxyCodeLine{59         \textcolor{keywordtype}{string} line;}
\DoxyCodeLine{60         ifstream fileOutput(outputInd.c\_str());}
\DoxyCodeLine{61         ofstream fileIndiv(\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/data/individu.txt"{}}, std::ios::out | std::ios::trunc);}
\DoxyCodeLine{62         \textcolor{keywordflow}{while} (getline(fileOutput, line)) \{}
\DoxyCodeLine{63             stringstream ss(line);}
\DoxyCodeLine{64             \textcolor{keywordtype}{int} cpt = 0;}
\DoxyCodeLine{65             \textcolor{keywordflow}{while} (ss.good()) \{}
\DoxyCodeLine{66                 std::string substr;}
\DoxyCodeLine{67                 getline(ss, substr, \textcolor{charliteral}{','});}
\DoxyCodeLine{68                 \textcolor{keywordflow}{if} (cpt == 2)\{}
\DoxyCodeLine{69                     \textcolor{keywordflow}{if} (isdigit(substr[0]))\{}
\DoxyCodeLine{70                         fileIndiv << substr << std::endl;}
\DoxyCodeLine{71                     \}}
\DoxyCodeLine{72                 \}}
\DoxyCodeLine{73                 cpt++;}
\DoxyCodeLine{74             \}}
\DoxyCodeLine{75 }
\DoxyCodeLine{76         \}}
\DoxyCodeLine{77         fileIndiv.close();}
\DoxyCodeLine{78         fileOutput.close();}
\DoxyCodeLine{79 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{request_8h}{request.\+h}}\item 
\mbox{\hyperlink{request_8cpp}{request.\+cpp}}\end{DoxyCompactItemize}
