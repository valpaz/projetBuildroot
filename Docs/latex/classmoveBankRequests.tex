\hypertarget{classmoveBankRequests}{}\doxysection{move\+Bank\+Requests Class Reference}
\label{classmoveBankRequests}\index{moveBankRequests@{moveBankRequests}}


This class is used to make requests to move\+Bank database (move\+Bank.\+org)  




{\ttfamily \#include $<$request.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmoveBankRequests_a76db415a23f819c6a1bd15e4f171eee2}{move\+Bank\+Requests}} (const string \&adresse, const string \&output\+File\+Path)
\begin{DoxyCompactList}\small\item\em Constructor for \mbox{\hyperlink{classmoveBankRequests}{move\+Bank\+Requests}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmoveBankRequests_a107b8bbaf772c6220d365752a4d059af}{id\+Parsing}} (const string \&home\+Dir, const string \&output\+Ind)
\begin{DoxyCompactList}\small\item\em Parsing for move\+Bank individual data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmoveBankRequests_a979a9f267e89db92c7084cbc4d971948}{event\+Initial\+Parsing}} (const string \&home\+Dir, const string \&output\+Event)
\begin{DoxyCompactList}\small\item\em Parsing for move\+Bank initial event data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmoveBankRequests_a3ac836852a4052c25d6004053dd26883}{event\+Updateparsing}} (const string \&home\+Dir, const string \&output\+Update\+Event)
\begin{DoxyCompactList}\small\item\em Parsing for move\+Bank update event data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class is used to make requests to move\+Bank database (move\+Bank.\+org) 

This class is used to request different types of data to move\+Bank database. It use the library curl and is implemented with my identifier. (identifier is needed to access move\+Bank) You could need to change it to your identifier. Just create an account on move\+Bank and change it here. Methods are used to parse raw data and store them in data and indfiles folders 

Definition at line 24 of file request.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmoveBankRequests_a76db415a23f819c6a1bd15e4f171eee2}\label{classmoveBankRequests_a76db415a23f819c6a1bd15e4f171eee2}} 
\index{moveBankRequests@{moveBankRequests}!moveBankRequests@{moveBankRequests}}
\index{moveBankRequests@{moveBankRequests}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{moveBankRequests()}{moveBankRequests()}}
{\footnotesize\ttfamily move\+Bank\+Requests\+::move\+Bank\+Requests (\begin{DoxyParamCaption}\item[{const string \&}]{adresse,  }\item[{const string \&}]{output\+File\+Path }\end{DoxyParamCaption})}



Constructor for \mbox{\hyperlink{classmoveBankRequests}{move\+Bank\+Requests}}. 


\begin{DoxyParams}{Parameters}
{\em adresse} & This is the https adress to where the request is made \\
\hline
{\em output\+File\+Path} & This is the path to where the data from the request are stored\\
\hline
\end{DoxyParams}
Make the call to the database, retrieve the data and store them


\begin{DoxyParams}{Parameters}
{\em adresse} & This is the https adress to where the request is made \\
\hline
{\em output\+File\+Path} & This is the path to where the data from the request are stored \\
\hline
\end{DoxyParams}


Definition at line 15 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15                                                                                      \{}
\DoxyCodeLine{16     curl = curl\_easy\_init();}
\DoxyCodeLine{17     CURLcode res;}
\DoxyCodeLine{18     curl\_easy\_setopt(curl, CURLOPT\_URL, adresse.c\_str());}
\DoxyCodeLine{19     curl\_easy\_setopt(curl, CURLOPT\_USERPWD, \textcolor{stringliteral}{"{}valpaz:valpaz21"{}});}
\DoxyCodeLine{20     FILE* outputFile;}
\DoxyCodeLine{21     outputFile = fopen(outputFilePath.c\_str(), \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{22     curl\_easy\_setopt(curl, CURLOPT\_WRITEDATA, outputFile);}
\DoxyCodeLine{23     res = curl\_easy\_perform(curl);}
\DoxyCodeLine{24     \textcolor{keywordflow}{if} (res != CURLE\_OK) \{}
\DoxyCodeLine{25         cerr << \textcolor{stringliteral}{"{}Request error "{}} << endl;}
\DoxyCodeLine{26     \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{27         cout << \textcolor{stringliteral}{"{}Successful request "{}} << endl;}
\DoxyCodeLine{28     \}}
\DoxyCodeLine{29     fclose(outputFile);}
\DoxyCodeLine{30 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmoveBankRequests_a979a9f267e89db92c7084cbc4d971948}\label{classmoveBankRequests_a979a9f267e89db92c7084cbc4d971948}} 
\index{moveBankRequests@{moveBankRequests}!eventInitialParsing@{eventInitialParsing}}
\index{eventInitialParsing@{eventInitialParsing}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{eventInitialParsing()}{eventInitialParsing()}}
{\footnotesize\ttfamily void move\+Bank\+Requests\+::event\+Initial\+Parsing (\begin{DoxyParamCaption}\item[{const string \&}]{home\+Dir,  }\item[{const string \&}]{output\+Event }\end{DoxyParamCaption})}



Parsing for move\+Bank initial event data. 


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Event} & This is the path to where the raw data from the request are stored\\
\hline
\end{DoxyParams}
Parse the raw event data (containing mixed data of all individual) and create new files for each tag\+\_\+id. Each of this new files are filled with their corresponding event which contain their location and time of this location. Thus are the initial data to populate the future graph. You can choose how much day of data you want to initialy retrieve by changing the number of day in \mbox{\hyperlink{myFunctions_8cpp_source}{my\+Functions.\+cpp}}


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Event} & This is the path to where the raw data from the request are stored \\
\hline
\end{DoxyParams}


Definition at line 73 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{73                                                                                          \{}
\DoxyCodeLine{74     ifstream fileInds(\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/data/individu.txt"{}});}
\DoxyCodeLine{75     \textcolor{keywordtype}{string} ligne;}
\DoxyCodeLine{76     \textcolor{keywordtype}{string} ligneEvent;}
\DoxyCodeLine{77     \textcolor{keywordtype}{string} currentId;}
\DoxyCodeLine{78     \textcolor{keywordtype}{int} cptt;}
\DoxyCodeLine{79     \textcolor{keywordflow}{while} (getline(fileInds, ligne)) \{}
\DoxyCodeLine{80         currentId = ligne;}
\DoxyCodeLine{81 }
\DoxyCodeLine{82         \textcolor{comment}{// Creating a file for each individual}}
\DoxyCodeLine{83         ofstream fileInd((\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/indFiles/"{}}+currentId + \textcolor{stringliteral}{"{}.csv"{}}).c\_str());}
\DoxyCodeLine{84         ifstream fileEvent(outputEvent.c\_str());}
\DoxyCodeLine{85         getline(fileEvent, ligneEvent);}
\DoxyCodeLine{86         \textcolor{keywordflow}{while} (getline(fileEvent, ligneEvent)) \{}
\DoxyCodeLine{87             stringstream ss(ligneEvent);}
\DoxyCodeLine{88             \textcolor{keywordtype}{string} valeur;}
\DoxyCodeLine{89             cptt = 0;}
\DoxyCodeLine{90             \textcolor{keywordflow}{while} (getline(ss, valeur, \textcolor{charliteral}{','})) \{}
\DoxyCodeLine{91                 \textcolor{keywordflow}{if} (cptt==4)\{}
\DoxyCodeLine{92                     valeur.erase(valeur.find\_last\_not\_of(\textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)r"{}}) + 1);         }
\DoxyCodeLine{93                     \textcolor{keywordflow}{if} (valeur==currentId)\{}
\DoxyCodeLine{94                         fileInd << ligneEvent << endl;}
\DoxyCodeLine{95 }
\DoxyCodeLine{96                     \}}
\DoxyCodeLine{97                 \}}
\DoxyCodeLine{98                 cptt++;}
\DoxyCodeLine{99             \}}
\DoxyCodeLine{100         \}}
\DoxyCodeLine{101         fileInd.close();}
\DoxyCodeLine{102         fileEvent.close();}
\DoxyCodeLine{103     \}}
\DoxyCodeLine{104     fileInds.close();}
\DoxyCodeLine{105 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmoveBankRequests_a3ac836852a4052c25d6004053dd26883}\label{classmoveBankRequests_a3ac836852a4052c25d6004053dd26883}} 
\index{moveBankRequests@{moveBankRequests}!eventUpdateparsing@{eventUpdateparsing}}
\index{eventUpdateparsing@{eventUpdateparsing}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{eventUpdateparsing()}{eventUpdateparsing()}}
{\footnotesize\ttfamily void move\+Bank\+Requests\+::event\+Updateparsing (\begin{DoxyParamCaption}\item[{const string \&}]{home\+Dir,  }\item[{const string \&}]{output\+Update\+Event }\end{DoxyParamCaption})}



Parsing for move\+Bank update event data. 


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Update\+Event} & This is the path to where the raw data from the request are stored\\
\hline
\end{DoxyParams}
Parse the raw event data (containing mixed data of all individual) and update already existing files for each tag\+\_\+id. Each of this files are filled with their new corresponding event which contain their location and time of this location.


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Update\+Event} & This is the path to where the raw data from the request are stored \\
\hline
\end{DoxyParams}


Definition at line 116 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{116                                                                                               \{}
\DoxyCodeLine{117     ifstream fileIndis(\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/data/individu.txt"{}});}
\DoxyCodeLine{118     \textcolor{keywordtype}{string} line;}
\DoxyCodeLine{119     \textcolor{keywordtype}{string} ligneEvent;}
\DoxyCodeLine{120     \textcolor{keywordtype}{string} currentId;}
\DoxyCodeLine{121     \textcolor{keywordtype}{int} cptt;}
\DoxyCodeLine{122     \textcolor{keywordflow}{while} (getline(fileIndis, line)) \{}
\DoxyCodeLine{123         currentId = line;}
\DoxyCodeLine{124 }
\DoxyCodeLine{125         ofstream fileUpdateInd((\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/indFiles/"{}}+currentId + \textcolor{stringliteral}{"{}.csv"{}}).c\_str(),std::ios::app);}
\DoxyCodeLine{126         ifstream fileUpdateEvent(outputUpdateEvent.c\_str());}
\DoxyCodeLine{127         \textcolor{keywordflow}{while} (getline(fileUpdateEvent, ligneEvent)) \{}
\DoxyCodeLine{128             stringstream ss(ligneEvent);}
\DoxyCodeLine{129             \textcolor{keywordtype}{string} valeur;}
\DoxyCodeLine{130             cptt = 0;}
\DoxyCodeLine{131             \textcolor{keywordflow}{while} (getline(ss, valeur, \textcolor{charliteral}{','})) \{}
\DoxyCodeLine{132                 \textcolor{keywordflow}{if} (cptt==4)\{}
\DoxyCodeLine{133                     valeur.erase(valeur.find\_last\_not\_of(\textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)r"{}}) + 1);   }
\DoxyCodeLine{134                     \textcolor{keywordflow}{if} (valeur==currentId)\{}
\DoxyCodeLine{135                         fileUpdateInd << ligneEvent << endl;}
\DoxyCodeLine{136 }
\DoxyCodeLine{137 }
\DoxyCodeLine{138                     \}}
\DoxyCodeLine{139                 \}}
\DoxyCodeLine{140                 cptt++;}
\DoxyCodeLine{141             \}}
\DoxyCodeLine{142         \}}
\DoxyCodeLine{143         fileUpdateInd.close();}
\DoxyCodeLine{144         fileUpdateEvent.close();}
\DoxyCodeLine{145 }
\DoxyCodeLine{146     \}}
\DoxyCodeLine{147 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classmoveBankRequests_a107b8bbaf772c6220d365752a4d059af}\label{classmoveBankRequests_a107b8bbaf772c6220d365752a4d059af}} 
\index{moveBankRequests@{moveBankRequests}!idParsing@{idParsing}}
\index{idParsing@{idParsing}!moveBankRequests@{moveBankRequests}}
\doxysubsubsection{\texorpdfstring{idParsing()}{idParsing()}}
{\footnotesize\ttfamily void move\+Bank\+Requests\+::id\+Parsing (\begin{DoxyParamCaption}\item[{const string \&}]{home\+Dir,  }\item[{const string \&}]{output\+Ind }\end{DoxyParamCaption})}



Parsing for move\+Bank individual data. 


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Ind} & This is the path to where the raw data from the request are stored\\
\hline
\end{DoxyParams}
Parse the raw data containing ids, informations, etc and create a new file containing only the tag Id (skipping useless data)


\begin{DoxyParams}{Parameters}
{\em home\+Dir} & The path representing your home directory \\
\hline
{\em output\+Ind} & This is the path to where the raw data from the request are stored \\
\hline
\end{DoxyParams}


Definition at line 40 of file request.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{40                                                                              \{}
\DoxyCodeLine{41         \textcolor{keywordtype}{string} line;}
\DoxyCodeLine{42         ifstream fileOutput(outputInd.c\_str());}
\DoxyCodeLine{43         ofstream fileIndiv(\textcolor{keywordtype}{string}(homeDir) + \textcolor{stringliteral}{"{}/moveBankProjet/data/individu.txt"{}}, std::ios::out | std::ios::trunc);}
\DoxyCodeLine{44         \textcolor{keywordflow}{while} (getline(fileOutput, line)) \{}
\DoxyCodeLine{45             stringstream ss(line);}
\DoxyCodeLine{46             \textcolor{keywordtype}{int} cpt = 0;}
\DoxyCodeLine{47             \textcolor{keywordflow}{while} (ss.good()) \{}
\DoxyCodeLine{48                 std::string substr;}
\DoxyCodeLine{49                 getline(ss, substr, \textcolor{charliteral}{','});}
\DoxyCodeLine{50                 \textcolor{keywordflow}{if} (cpt == 2)\{}
\DoxyCodeLine{51                     \textcolor{keywordflow}{if} (isdigit(substr[0]))\{}
\DoxyCodeLine{52                         fileIndiv << substr << std::endl;}
\DoxyCodeLine{53                     \}}
\DoxyCodeLine{54                 \}}
\DoxyCodeLine{55                 cpt++;}
\DoxyCodeLine{56             \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58         \}}
\DoxyCodeLine{59         fileIndiv.close();}
\DoxyCodeLine{60         fileOutput.close();}
\DoxyCodeLine{61 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{request_8h}{request.\+h}}\item 
\mbox{\hyperlink{request_8cpp}{request.\+cpp}}\end{DoxyCompactItemize}
